ORG 1000h
TABLA DB 1,20,5,4,30
FINTABLA DB?
ORG 3000h

RUTINA: PUSH BX
  PUSH AX
  PUSH CX
  MOV BX,SP
  ADD BX,8
  MOV BX,[BX];almaceno la ref de la tabla en bX
  MOV BL,[BX];almaceno EL VALOR de la tabla en bL

  MOV AL,0 ;RES
  MOV CL,1; i
 FOR2: CMP BL,CL
   JS FIN
  ADD AL,CL
  INC CL
  JMP FOR2
  
FIN:
MOV BX, SP
ADD BX,8
MOV BX,[BX]
MOV [BX], AL 
POP CX
POP AX
POP BX

 
RET

ORG 2000h
MOV AX, OFFSET TABLA
MOV BX,AX
MOV DL, OFFSET FINTABLA - OFFSET TABLA

FOR1:  CMP DL,0
  JZ FIN
  CMP BYTE PTR [BX],20
  JS SIGUE 
  PUSH AX
  CALL RUTINA
  POP AX
  SIGUE:
  DEC DL
  INC AX
  JMP FOR1



HLT
END