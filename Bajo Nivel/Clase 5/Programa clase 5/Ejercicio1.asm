ORG 1000h
;TABLA DB 1,20,5,4,30
NUM DB 4
;FINTABLA DB?
ORG 3000h

RUTINA: PUSH BX
  PUSH AX
  PUSH CX
  MOV BX,SP
  ADD BX,8
  MOV BX,[BX];almaceno la ref de la tabla en bX
  MOV BL,[BX];almaceno EL VALOR de la tabla en bL

  MOV AL,0 ;RES
  MOV CL,1; i
 FOR: CMP BL,CL
   JS FIN
  ADD AL,CL
  INC CL
  JMP FOR
  
FIN:
MOV BX, SP
ADD BX,8
MOV BX,[BX]
MOV [BX], AL 
POP CX
POP AX
POP BX

;MOV [BX], AL 
RET

ORG 2000h

;MOV AX, OFFSET TABLA
;MOV AH, OFFSET FINTABLA - OFFSET TABLA
MOV AX,OFFSET NUM
PUSH AX
CALL RUTINA
POP AX
HLT
END